<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "8164484c16b1ed3287ef9dae9fc437c1",
  "translation_date": "2025-07-23T08:46:01+00:00",
  "source_file": "10-ai-agents-production/README.md",
  "language_code": "el"
}
-->
# Πράκτορες AI στην Παραγωγή: Παρατηρησιμότητα & Αξιολόγηση

Καθώς οι πράκτορες AI μεταβαίνουν από πειραματικά πρωτότυπα σε εφαρμογές πραγματικού κόσμου, η δυνατότητα κατανόησης της συμπεριφοράς τους, παρακολούθησης της απόδοσής τους και συστηματικής αξιολόγησης των αποτελεσμάτων τους γίνεται σημαντική.

## Στόχοι Μάθησης

Μετά την ολοκλήρωση αυτού του μαθήματος, θα γνωρίζετε πώς να/κατανοείτε:
- Βασικές έννοιες της παρατηρησιμότητας και αξιολόγησης πρακτόρων
- Τεχνικές για τη βελτίωση της απόδοσης, του κόστους και της αποτελεσματικότητας των πρακτόρων
- Τι και πώς να αξιολογείτε συστηματικά τους πράκτορες AI σας
- Πώς να ελέγχετε το κόστος κατά την ανάπτυξη πρακτόρων AI στην παραγωγή
- Πώς να εξοπλίζετε πράκτορες που έχουν δημιουργηθεί με το AutoGen

Ο στόχος είναι να σας εξοπλίσουμε με τη γνώση για να μετατρέψετε τους "μαύρους κουτιά" πράκτορες σε διαφανή, διαχειρίσιμα και αξιόπιστα συστήματα.

_**Σημείωση:** Είναι σημαντικό να αναπτύσσετε πράκτορες AI που είναι ασφαλείς και αξιόπιστοι. Δείτε το μάθημα [Δημιουργία Αξιόπιστων Πρακτόρων AI](./06-building-trustworthy-agents/README.md) για περισσότερες πληροφορίες._

## Ίχνη και Ενότητες

Τα εργαλεία παρατηρησιμότητας όπως το [Langfuse](https://langfuse.com/) ή το [Azure AI Foundry](https://learn.microsoft.com/en-us/azure/ai-foundry/what-is-azure-ai-foundry) συνήθως αναπαριστούν τις εκτελέσεις πρακτόρων ως ίχνη και ενότητες.

- **Ίχνος** αντιπροσωπεύει μια πλήρη εργασία πράκτορα από την αρχή μέχρι το τέλος (όπως η διαχείριση ενός ερωτήματος χρήστη).
- **Ενότητες** είναι τα επιμέρους βήματα μέσα στο ίχνος (όπως η κλήση ενός μοντέλου γλώσσας ή η ανάκτηση δεδομένων).

![Δέντρο ιχνών στο Langfuse](https://langfuse.com/images/cookbook/example-autogen-evaluation/trace-tree.png)

Χωρίς παρατηρησιμότητα, ένας πράκτορας AI μπορεί να μοιάζει με "μαύρο κουτί" - η εσωτερική του κατάσταση και η λογική του είναι αδιαφανείς, καθιστώντας δύσκολη τη διάγνωση προβλημάτων ή τη βελτιστοποίηση της απόδοσης. Με την παρατηρησιμότητα, οι πράκτορες γίνονται "γυάλινα κουτιά," προσφέροντας διαφάνεια που είναι ζωτικής σημασίας για την οικοδόμηση εμπιστοσύνης και την εξασφάλιση ότι λειτουργούν όπως προβλέπεται.

## Γιατί η Παρατηρησιμότητα Είναι Σημαντική σε Περιβάλλοντα Παραγωγής

Η μετάβαση των πρακτόρων AI σε περιβάλλοντα παραγωγής εισάγει μια νέα σειρά προκλήσεων και απαιτήσεων. Η παρατηρησιμότητα δεν είναι πλέον "καλό να υπάρχει" αλλά μια κρίσιμη δυνατότητα:

*   **Εντοπισμός Σφαλμάτων και Ανάλυση Αιτίων**: Όταν ένας πράκτορας αποτυγχάνει ή παράγει ένα απροσδόκητο αποτέλεσμα, τα εργαλεία παρατηρησιμότητας παρέχουν τα ίχνη που χρειάζονται για να εντοπιστεί η πηγή του σφάλματος. Αυτό είναι ιδιαίτερα σημαντικό σε σύνθετους πράκτορες που μπορεί να περιλαμβάνουν πολλαπλές κλήσεις LLM, αλληλεπιδράσεις εργαλείων και λογική υπό όρους.
*   **Διαχείριση Καθυστέρησης και Κόστους**: Οι πράκτορες AI συχνά βασίζονται σε LLMs και άλλες εξωτερικές APIs που χρεώνονται ανά token ή ανά κλήση. Η παρατηρησιμότητα επιτρέπει την ακριβή παρακολούθηση αυτών των κλήσεων, βοηθώντας στον εντοπισμό λειτουργιών που είναι υπερβολικά αργές ή ακριβές. Αυτό επιτρέπει στις ομάδες να βελτιστοποιήσουν τα prompts, να επιλέξουν πιο αποδοτικά μοντέλα ή να επανασχεδιάσουν τις ροές εργασίας για τη διαχείριση του λειτουργικού κόστους και την εξασφάλιση μιας καλής εμπειρίας χρήστη.
*   **Εμπιστοσύνη, Ασφάλεια και Συμμόρφωση**: Σε πολλές εφαρμογές, είναι σημαντικό να εξασφαλιστεί ότι οι πράκτορες λειτουργούν με ασφάλεια και ηθική. Η παρατηρησιμότητα παρέχει ένα ίχνος ελέγχου των ενεργειών και αποφάσεων του πράκτορα. Αυτό μπορεί να χρησιμοποιηθεί για την ανίχνευση και την αντιμετώπιση προβλημάτων όπως η έγχυση prompts, η δημιουργία επιβλαβούς περιεχομένου ή η κακή διαχείριση προσωπικών δεδομένων (PII). Για παράδειγμα, μπορείτε να αναθεωρήσετε ίχνη για να κατανοήσετε γιατί ένας πράκτορας έδωσε μια συγκεκριμένη απάντηση ή χρησιμοποίησε ένα συγκεκριμένο εργαλείο.
*   **Συνεχείς Βρόχοι Βελτίωσης**: Τα δεδομένα παρατηρησιμότητας αποτελούν τη βάση μιας διαδικασίας επαναληπτικής ανάπτυξης. Παρακολουθώντας πώς οι πράκτορες αποδίδουν στον πραγματικό κόσμο, οι ομάδες μπορούν να εντοπίσουν περιοχές για βελτίωση, να συλλέξουν δεδομένα για την προσαρμογή μοντέλων και να επικυρώσουν τον αντίκτυπο των αλλαγών. Αυτό δημιουργεί έναν βρόχο ανατροφοδότησης όπου οι πληροφορίες παραγωγής από την online αξιολόγηση ενημερώνουν την offline πειραματική εργασία και τη βελτίωση, οδηγώντας σε προοδευτικά καλύτερη απόδοση πρακτόρων.

## Βασικές Μετρήσεις για Παρακολούθηση

Για να παρακολουθήσετε και να κατανοήσετε τη συμπεριφορά των πρακτόρων, πρέπει να παρακολουθούνται μια σειρά από μετρήσεις και σήματα. Ενώ οι συγκεκριμένες μετρήσεις μπορεί να διαφέρουν ανάλογα με τον σκοπό του πράκτορα, ορισμένες είναι καθολικά σημαντικές.

Ακολουθούν μερικές από τις πιο κοινές μετρήσεις που παρακολουθούν τα εργαλεία παρατηρησιμότητας:

**Καθυστέρηση:** Πόσο γρήγορα ανταποκρίνεται ο πράκτορας; Οι μεγάλες αναμονές επηρεάζουν αρνητικά την εμπειρία χρήστη. Πρέπει να μετράτε την καθυστέρηση για εργασίες και επιμέρους βήματα παρακολουθώντας τις εκτελέσεις του πράκτορα. Για παράδειγμα, ένας πράκτορας που χρειάζεται 20 δευτερόλεπτα για όλες τις κλήσεις μοντέλου θα μπορούσε να επιταχυνθεί χρησιμοποιώντας ένα ταχύτερο μοντέλο ή εκτελώντας τις κλήσεις μοντέλου παράλληλα.

**Κόστη:** Ποιο είναι το κόστος ανά εκτέλεση πράκτορα; Οι πράκτορες AI βασίζονται σε κλήσεις LLM που χρεώνονται ανά token ή εξωτερικές APIs. Η συχνή χρήση εργαλείων ή πολλαπλά prompts μπορεί να αυξήσει γρήγορα το κόστος. Για παράδειγμα, αν ένας πράκτορας καλεί ένα LLM πέντε φορές για οριακή βελτίωση ποιότητας, πρέπει να αξιολογήσετε αν το κόστος δικαιολογείται ή αν μπορείτε να μειώσετε τον αριθμό των κλήσεων ή να χρησιμοποιήσετε ένα φθηνότερο μοντέλο. Η παρακολούθηση σε πραγματικό χρόνο μπορεί επίσης να βοηθήσει στον εντοπισμό απροσδόκητων αυξήσεων (π.χ. σφάλματα που προκαλούν υπερβολικούς βρόχους API).

**Σφάλματα Αιτήσεων:** Πόσες αιτήσεις απέτυχε ο πράκτορας; Αυτό μπορεί να περιλαμβάνει σφάλματα API ή αποτυχημένες κλήσεις εργαλείων. Για να κάνετε τον πράκτορά σας πιο ανθεκτικό σε αυτά στην παραγωγή, μπορείτε να ρυθμίσετε εναλλακτικές λύσεις ή επαναλήψεις. Π.χ. αν ο πάροχος LLM A είναι εκτός λειτουργίας, να μεταβείτε στον πάροχο LLM B ως εφεδρικό.

**Ανατροφοδότηση Χρηστών:** Η εφαρμογή άμεσων αξιολογήσεων από χρήστες παρέχει πολύτιμες πληροφορίες. Αυτό μπορεί να περιλαμβάνει ρητές αξιολογήσεις (👍θετική/👎αρνητική, ⭐1-5 αστέρια) ή κειμενικά σχόλια. Συνεχής αρνητική ανατροφοδότηση πρέπει να σας ειδοποιεί, καθώς αυτό είναι ένδειξη ότι ο πράκτορας δεν λειτουργεί όπως αναμένεται.

**Έμμεση Ανατροφοδότηση Χρηστών:** Οι συμπεριφορές των χρηστών παρέχουν έμμεση ανατροφοδότηση ακόμη και χωρίς ρητές αξιολογήσεις. Αυτό μπορεί να περιλαμβάνει άμεση επαναδιατύπωση ερωτήσεων, επαναλαμβανόμενα ερωτήματα ή κλικ σε κουμπί επαναπροσπάθειας. Π.χ. αν βλέπετε ότι οι χρήστες επαναλαμβάνουν συνεχώς την ίδια ερώτηση, αυτό είναι ένδειξη ότι ο πράκτορας δεν λειτουργεί όπως αναμένεται.

**Ακρίβεια:** Πόσο συχνά παράγει ο πράκτορας σωστά ή επιθυμητά αποτελέσματα; Οι ορισμοί της ακρίβειας ποικίλλουν (π.χ., ορθότητα επίλυσης προβλημάτων, ακρίβεια ανάκτησης πληροφοριών, ικανοποίηση χρήστη). Το πρώτο βήμα είναι να ορίσετε τι σημαίνει επιτυχία για τον πράκτορά σας. Μπορείτε να παρακολουθήσετε την ακρίβεια μέσω αυτοματοποιημένων ελέγχων, βαθμολογιών αξιολόγησης ή ετικετών ολοκλήρωσης εργασιών. Για παράδειγμα, να σημειώνετε ίχνη ως "επιτυχημένα" ή "αποτυχημένα".

**Αυτοματοποιημένες Μετρήσεις Αξιολόγησης:** Μπορείτε επίσης να ρυθμίσετε αυτοματοποιημένες αξιολογήσεις. Για παράδειγμα, μπορείτε να χρησιμοποιήσετε ένα LLM για να βαθμολογήσετε την έξοδο του πράκτορα π.χ. αν είναι χρήσιμη, ακριβής ή όχι. Υπάρχουν επίσης αρκετές βιβλιοθήκες ανοιχτού κώδικα που σας βοηθούν να βαθμολογήσετε διαφορετικές πτυχές του πράκτορα. Π.χ. [RAGAS](https://docs.ragas.io/) για πράκτορες RAG ή [LLM Guard](https://llm-guard.com/) για την ανίχνευση επιβλαβούς γλώσσας ή έγχυσης prompts.

Στην πράξη, ένας συνδυασμός αυτών των μετρήσεων παρέχει την καλύτερη κάλυψη της υγείας ενός πράκτορα AI. Στο [παράδειγμα notebook](../../../10-ai-agents-production/code_samples/10_autogen_evaluation.ipynb) αυτού του κεφαλαίου, θα σας δείξουμε πώς φαίνονται αυτές οι μετρήσεις σε πραγματικά παραδείγματα, αλλά πρώτα θα μάθουμε πώς μοιάζει μια τυπική ροή εργασίας αξιολόγησης.

## Εξοπλισμός του Πράκτορά σας

Για να συλλέξετε δεδομένα ιχνών, θα χρειαστεί να εξοπλίσετε τον κώδικά σας. Ο στόχος είναι να εξοπλίσετε τον κώδικα του πράκτορα ώστε να εκπέμπει ίχνη και μετρήσεις που μπορούν να καταγραφούν, να επεξεργαστούν και να οπτικοποιηθούν από μια πλατφόρμα παρατηρησιμότητας.

**OpenTelemetry (OTel):** Το [OpenTelemetry](https://opentelemetry.io/) έχει αναδειχθεί ως βιομηχανικό πρότυπο για την παρατηρησιμότητα LLM. Παρέχει ένα σύνολο APIs, SDKs και εργαλείων για τη δημιουργία, συλλογή και εξαγωγή δεδομένων τηλεμετρίας.

Υπάρχουν πολλές βιβλιοθήκες εξοπλισμού που τυλίγουν υπάρχοντα πλαίσια πρακτόρων και καθιστούν εύκολη την εξαγωγή ενότητων OpenTelemetry σε ένα εργαλείο παρατηρησιμότητας. Παρακάτω είναι ένα παράδειγμα εξοπλισμού ενός πράκτορα AutoGen με τη βιβλιοθήκη εξοπλισμού [OpenLit](https://github.com/openlit/openlit):

```python
import openlit

openlit.init(tracer = langfuse._otel_tracer, disable_batch = True)
```

Το [παράδειγμα notebook](../../../10-ai-agents-production/code_samples/10_autogen_evaluation.ipynb) αυτού του κεφαλαίου θα δείξει πώς να εξοπλίσετε τον πράκτορα AutoGen σας.

**Χειροκίνητη Δημιουργία Ενοτήτων:** Ενώ οι βιβλιοθήκες εξοπλισμού παρέχουν μια καλή βάση, υπάρχουν συχνά περιπτώσεις όπου χρειάζονται πιο λεπτομερείς ή προσαρμοσμένες πληροφορίες. Μπορείτε να δημιουργήσετε χειροκίνητα ενότητες για να προσθέσετε προσαρμοσμένη λογική εφαρμογής. Πιο σημαντικό, μπορούν να εμπλουτίσουν αυτόματα ή χειροκίνητα δημιουργημένες ενότητες με προσαρμοσμένα χαρακτηριστικά (γνωστά και ως ετικέτες ή μεταδεδομένα). Αυτά τα χαρακτηριστικά μπορούν να περιλαμβάνουν δεδομένα ειδικά για την επιχείρηση, ενδιάμεσους υπολογισμούς ή οποιοδήποτε πλαίσιο που μπορεί να είναι χρήσιμο για την ανάλυση ή την ανίχνευση σφαλμάτων, όπως `user_id`, `session_id` ή `model_version`.

Παράδειγμα δημιουργίας ιχνών και ενοτήτων χειροκίνητα με το [Langfuse Python SDK](https://langfuse.com/docs/sdk/python/sdk-v3):

```python
from langfuse import get_client
 
langfuse = get_client()
 
span = langfuse.start_span(name="my-span")
 
span.end()
```

## Αξιολόγηση Πράκτορα

Η παρατηρησιμότητα μας δίνει μετρήσεις, αλλά η αξιολόγηση είναι η διαδικασία ανάλυσης αυτών των δεδομένων (και η εκτέλεση δοκιμών) για να καθοριστεί πόσο καλά αποδίδει ένας πράκτορας AI και πώς μπορεί να βελτιωθεί. Με άλλα λόγια, μόλις έχετε αυτά τα ίχνη και τις μετρήσεις, πώς τα χρησιμοποιείτε για να κρίνετε τον πράκτορα και να λάβετε αποφάσεις;

Η τακτική αξιολόγηση είναι σημαντική επειδή οι πράκτορες AI είναι συχνά μη-ντετερμινιστικοί και μπορούν να εξελιχθούν (μέσω ενημερώσεων ή μεταβολής της συμπεριφοράς του μοντέλου) – χωρίς αξιολόγηση, δεν θα γνωρίζατε αν ο "έξυπνος πράκτορας" σας κάνει πραγματικά καλά τη δουλειά του ή αν έχει υποβαθμιστεί.

Υπάρχουν δύο κατηγορίες αξιολογήσεων για πράκτορες AI: **online αξιολόγηση** και **offline αξιολόγηση**. Και οι δύο είναι πολύτιμες και συμπληρώνουν η μία την άλλη. Συνήθως ξεκινάμε με offline αξιολόγηση, καθώς αυτό είναι το ελάχιστο απαραίτητο βήμα πριν από την ανάπτυξη οποιουδήποτε πράκτορα.

### Offline Αξιολόγηση

![Στοιχεία συνόλου δεδομένων στο Langfuse](https://langfuse.com/images/cookbook/example-autogen-evaluation/example-dataset.png)

Αυτή περιλαμβάνει την αξιολόγηση του πράκτορα σε ελεγχόμενο περιβάλλον, συνήθως χρησιμοποιώντας σύνολα δεδομένων δοκιμής, όχι ζωντανά ερωτήματα χρηστών. Χρησιμοποιείτε επιμελημένα σύνολα δεδομένων όπου γνωρίζετε ποια είναι η αναμενόμενη έξοδος ή η σωστή συμπεριφορά και στη συνέχεια εκτελείτε τον πράκτορα σε αυτά.

Για παράδειγμα, αν έχετε δημιουργήσει έναν πράκτορα για προβλήματα μαθηματικών, μπορεί να έχετε ένα [σύνολο δεδομένων δοκιμής](https://huggingface.co/datasets/gsm8k) με 100 προβλήματα με γνωστές απαντήσεις. Η offline αξιολόγηση γίνεται συχνά κατά τη διάρκεια της ανάπτυξης (και μπορεί να αποτελεί μέρος των pipelines CI/CD) για να ελέγξετε βελτιώσεις ή να προστατευθείτε από υποβαθμίσεις. Το πλεονέκτημα είναι ότι είναι **επαναλήψιμη και μπορείτε να έχετε σαφείς μετρήσεις ακρίβειας, καθώς έχετε την αλήθεια εδάφους**. Μπορεί επίσης να προσομοιώσετε ερωτήματα χρηστών και να μετρήσετε τις απαντήσεις του πράκτορα σε σχέση με ιδ

- Βελτιώστε τις καθορισμένες παραμέτρους, προτροπές και ονομασίες εργαλείων.  |
| Το σύστημα πολλαπλών πρακτόρων δεν αποδίδει σταθερά | - Βελτιώστε τις προτροπές που δίνονται σε κάθε πράκτορα ώστε να είναι συγκεκριμένες και να διαφέρουν μεταξύ τους.<br>- Δημιουργήστε ένα ιεραρχικό σύστημα χρησιμοποιώντας έναν "πράκτορα δρομολόγησης" ή ελεγκτή για να καθορίσετε ποιος πράκτορας είναι ο κατάλληλος. |

Πολλά από αυτά τα ζητήματα μπορούν να εντοπιστούν πιο αποτελεσματικά με την ύπαρξη παρατηρησιμότητας. Τα ίχνη και οι μετρήσεις που συζητήσαμε νωρίτερα βοηθούν στον ακριβή εντοπισμό του σημείου όπου προκύπτουν προβλήματα στη ροή εργασίας του πράκτορα, καθιστώντας την αποσφαλμάτωση και τη βελτιστοποίηση πολύ πιο αποδοτικές.

## Διαχείριση Κόστους

Ακολουθούν ορισμένες στρατηγικές για τη διαχείριση του κόστους κατά την ανάπτυξη πρακτόρων AI σε παραγωγή:

**Χρήση Μικρότερων Μοντέλων:** Τα Μικρά Γλωσσικά Μοντέλα (SLMs) μπορούν να αποδώσουν καλά σε ορισμένες περιπτώσεις χρήσης πρακτόρων και να μειώσουν σημαντικά το κόστος. Όπως αναφέρθηκε νωρίτερα, η δημιουργία ενός συστήματος αξιολόγησης για τον καθορισμό και τη σύγκριση της απόδοσης σε σχέση με μεγαλύτερα μοντέλα είναι ο καλύτερος τρόπος για να κατανοήσετε πόσο καλά θα αποδώσει ένα SLM στη δική σας περίπτωση χρήσης. Σκεφτείτε να χρησιμοποιήσετε SLMs για απλούστερες εργασίες όπως η ταξινόμηση προθέσεων ή η εξαγωγή παραμέτρων, ενώ κρατάτε τα μεγαλύτερα μοντέλα για πιο σύνθετους συλλογισμούς.

**Χρήση Μοντέλου Δρομολόγησης:** Μια παρόμοια στρατηγική είναι η χρήση ποικιλίας μοντέλων και μεγεθών. Μπορείτε να χρησιμοποιήσετε ένα LLM/SLM ή μια serverless λειτουργία για να δρομολογήσετε αιτήματα ανάλογα με την πολυπλοκότητα στα κατάλληλα μοντέλα. Αυτό θα βοηθήσει στη μείωση του κόστους, διασφαλίζοντας παράλληλα την απόδοση στις κατάλληλες εργασίες. Για παράδειγμα, δρομολογήστε απλά ερωτήματα σε μικρότερα, ταχύτερα μοντέλα και χρησιμοποιήστε μόνο τα ακριβά μεγάλα μοντέλα για σύνθετες εργασίες συλλογισμού.

**Αποθήκευση Απαντήσεων στην Cache:** Ο εντοπισμός κοινών αιτημάτων και εργασιών και η παροχή απαντήσεων πριν περάσουν από το σύστημα πρακτόρων σας είναι ένας καλός τρόπος για να μειώσετε τον όγκο παρόμοιων αιτημάτων. Μπορείτε ακόμη και να υλοποιήσετε μια ροή για να εντοπίσετε πόσο παρόμοιο είναι ένα αίτημα με τα αποθηκευμένα αιτήματα χρησιμοποιώντας πιο βασικά μοντέλα AI. Αυτή η στρατηγική μπορεί να μειώσει σημαντικά το κόστος για συχνές ερωτήσεις ή κοινές ροές εργασίας.

## Ας δούμε πώς λειτουργεί αυτό στην πράξη

Στο [παράδειγμα notebook αυτής της ενότητας](../../../10-ai-agents-production/code_samples/10_autogen_evaluation.ipynb), θα δούμε παραδείγματα για το πώς μπορούμε να χρησιμοποιήσουμε εργαλεία παρατηρησιμότητας για να παρακολουθούμε και να αξιολογούμε τον πράκτορά μας.

## Προηγούμενο Μάθημα

[Σχεδιαστικό Πρότυπο Μεταγνώσης](../09-metacognition/README.md)

## Επόμενο Μάθημα

[MCP](../11-mcp/README.md)

**Αποποίηση ευθύνης**:  
Αυτό το έγγραφο έχει μεταφραστεί χρησιμοποιώντας την υπηρεσία αυτόματης μετάφρασης [Co-op Translator](https://github.com/Azure/co-op-translator). Παρόλο που καταβάλλουμε προσπάθειες για ακρίβεια, παρακαλούμε να έχετε υπόψη ότι οι αυτοματοποιημένες μεταφράσεις ενδέχεται να περιέχουν λάθη ή ανακρίβειες. Το πρωτότυπο έγγραφο στη μητρική του γλώσσα θα πρέπει να θεωρείται η αυθεντική πηγή. Για κρίσιμες πληροφορίες, συνιστάται επαγγελματική ανθρώπινη μετάφραση. Δεν φέρουμε ευθύνη για τυχόν παρεξηγήσεις ή εσφαλμένες ερμηνείες που προκύπτουν από τη χρήση αυτής της μετάφρασης.